{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useLayoutEffect, useContext, useRef } from \"react\";\nimport styled, { ThemeProvider } from \"styled-components\";\nimport Head from \"next/head\";\nimport AOS from \"aos\";\nimport Header from \"../Header\";\nimport Footer from \"../Footer\";\nimport ThemeSwitch from \"../ThemeSwitch\";\nimport ModalVideo from \"../ModalVideo\";\nimport ContactModal from \"../ContactModal\";\nimport AboutModal from \"../AboutModal\";\nimport GlobalContext from \"../../context/GlobalContext\";\nimport GlobalStyle from \"../../utils/globalStyle\";\nimport imgFavicon from \"../../assets/favicon.png\";\nimport { get, merge } from \"lodash\"; // the full theme object\n\nimport { theme as baseTheme } from \"../../utils\";\nconst Loader = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: #fff;\n  z-index: 9999999999;\n  opacity: 1;\n  visibility: visible;\n  transition: all 1s ease-out 0.5s;\n  &.inActive {\n    opacity: 0;\n    visibility: hidden;\n  }\n`; // options for different color modes\n\nconst modes = {\n  light: \"light\",\n  dark: \"dark\"\n}; // merge the color mode with the base theme\n// to create a new theme object\n\nconst getTheme = mode => merge({}, baseTheme, {\n  colors: get(baseTheme.colors.modes, mode, baseTheme.colors)\n});\n\nconst Layout = ({\n  children,\n  pageContext\n}) => {\n  const gContext = useContext(GlobalContext);\n  const {\n    0: visibleLoader,\n    1: setVisibleLoader\n  } = useState(true);\n  useLayoutEffect(() => {\n    AOS.init();\n    setVisibleLoader(false);\n  }, []); // Navbar style based on scroll\n\n  const eleRef = useRef();\n  useEffect(() => {\n    window.addEventListener(\"popstate\", function (event) {\n      // The popstate event is fired each time when the current history entry changes.\n      gContext.closeAbout();\n      gContext.closeContact();\n    }, false);\n    window.addEventListener(\"pushState\", function (event) {\n      // The pushstate event is fired each time when the current history entry changes.\n      gContext.closeAbout();\n      gContext.closeContact();\n    }, false);\n    return () => {};\n  }, [gContext]);\n\n  if (pageContext.layout === \"bare\") {\n    return __jsx(ThemeProvider, {\n      theme: gContext.theme.bodyDark ? getTheme(modes.dark) : getTheme(modes.light)\n    }, __jsx(ThemeSwitch, null), __jsx(GlobalStyle, null), __jsx(Head, null, __jsx(\"title\", null, \"Sage Flowers - Custom Faux and Silk Flower Arrangements\"), __jsx(\"link\", {\n      rel: \"icon\",\n      type: \"image/png\",\n      href: imgFavicon\n    })), __jsx(Loader, {\n      id: \"loading\",\n      className: visibleLoader ? \"\" : \"inActive\"\n    }, __jsx(\"div\", {\n      className: \"load-circle\"\n    }, __jsx(\"span\", {\n      className: \"one\"\n    }))), __jsx(\"div\", {\n      className: \"site-wrapper overflow-hidden\",\n      ref: eleRef\n    }, children), __jsx(ModalVideo, null));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(ThemeProvider, {\n    theme: gContext.theme.bodyDark ? getTheme(modes.dark) : getTheme(modes.light)\n  }, __jsx(ThemeSwitch, null), __jsx(GlobalStyle, null), __jsx(Head, null, __jsx(\"title\", null, \"Sage Flowers - Custom Faux and Silk Flower Arrangements\"), __jsx(\"link\", {\n    rel: \"icon\",\n    type: \"image/png\",\n    href: imgFavicon\n  })), __jsx(Loader, {\n    id: \"loading\",\n    className: visibleLoader ? \"\" : \"inActive\"\n  }, __jsx(\"div\", {\n    className: \"load-circle\"\n  }, __jsx(\"span\", {\n    className: \"one\"\n  }))), __jsx(\"div\", {\n    className: \"site-wrapper overflow-hidden\",\n    ref: eleRef\n  }, __jsx(Header, {\n    isDark: gContext.theme.headerDark\n  }), children, __jsx(Footer, {\n    isDark: gContext.theme.footerDark\n  })), __jsx(AboutModal, null), __jsx(ContactModal, null), __jsx(ModalVideo, null)));\n};\n\nexport default Layout;","map":null,"metadata":{},"sourceType":"module"}